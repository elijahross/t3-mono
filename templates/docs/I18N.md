# Internationalization (i18n) with next-intl

This project uses [next-intl](https://next-intl-docs.vercel.app/) for internationalization with full TypeScript type safety.

## Configuration

### File Structure

```
project/
├── messages/
│   ├── en.json          # English translations
│   └── de.json          # German translations
├── src/
│   ├── i18n/
│   │   └── request.ts   # next-intl server configuration
│   └── types/
│       └── dictionary.ts  # TypeScript types for translations
└── next.config.js       # next-intl plugin configuration
```

### Supported Locales

Locales are defined in `src/types/dictionary.ts`:

```typescript
export const locales = ["de", "en"] as const;
```

### Locale Detection

The locale is determined from a cookie (`locale`) with fallback to English:

```typescript
// src/i18n/request.ts
const locale = (await cookieStore).get("locale")?.value ?? "en";
```

## Adding Translations

### 1. Define Translation Structure

Add your translations to the JSON files in `messages/`:

```json
// messages/en.json
{
  "common": {
    "save": "Save",
    "cancel": "Cancel",
    "loading": "Loading..."
  },
  "addNew": {
    "stepOne": {
      "title": "Step 1: Basic Information",
      "description": "Enter the basic details",
      "fields": {
        "name": "Name",
        "email": "Email"
      }
    },
    "stepTwo": {
      "title": "Step 2: Additional Details"
    }
  },
  "errors": {
    "required": "This field is required",
    "invalidEmail": "Please enter a valid email"
  }
}
```

```json
// messages/de.json
{
  "common": {
    "save": "Speichern",
    "cancel": "Abbrechen",
    "loading": "Wird geladen..."
  },
  "addNew": {
    "stepOne": {
      "title": "Schritt 1: Grundinformationen",
      "description": "Geben Sie die grundlegenden Daten ein",
      "fields": {
        "name": "Name",
        "email": "E-Mail"
      }
    },
    "stepTwo": {
      "title": "Schritt 2: Zusätzliche Details"
    }
  },
  "errors": {
    "required": "Dieses Feld ist erforderlich",
    "invalidEmail": "Bitte geben Sie eine gültige E-Mail-Adresse ein"
  }
}
```

**Important:** Both JSON files must have the same structure for TypeScript types to work correctly.

### 2. AppDictionary Type

The `AppDictionary` type is automatically derived from your translation files:

```typescript
// src/types/dictionary.ts
import type de from "../../messages/de.json";
import type en from "../../messages/en.json";

export const locales = ["de", "en"] as const;

export type AppDictionary = typeof de;
```

This provides full type safety - TypeScript will error if you try to access a translation key that doesn't exist.

## Using Translations in Components

### Method 1: Type-Safe Raw Access (Recommended)

Use the `.raw()` method with type casting for full TypeScript support:

```typescript
"use client";

import { useTranslations } from "next-intl";
import type { AppDictionary } from "@/types/dictionary";

export function StepOneForm() {
  // Get the raw translation object with type safety
  const dict = useTranslations("addNew").raw(
    "stepOne",
  ) as AppDictionary["addNew"]["stepOne"];

  return (
    <div>
      <h1>{dict.title}</h1>
      <p>{dict.description}</p>
      <label>{dict.fields.name}</label>
      <label>{dict.fields.email}</label>
    </div>
  );
}
```

**Benefits:**

- Full autocomplete for nested translation keys
- TypeScript errors if you access non-existent keys
- Access to the entire translation object structure

### Method 2: Standard useTranslations Hook

For simple string access:

```typescript
"use client";

import { useTranslations } from "next-intl";

export function SaveButton() {
  const t = useTranslations("common");

  return (
    <button>{t("save")}</button>
  );
}
```

### Method 3: Nested Namespaces

Access deeply nested translations:

```typescript
"use client";

import { useTranslations } from "next-intl";

export function FormFields() {
  const t = useTranslations("addNew.stepOne.fields");

  return (
    <div>
      <label>{t("name")}</label>
      <label>{t("email")}</label>
    </div>
  );
}
```

## Adding a New Language

1. Create a new translation file in `messages/`:

```json
// messages/fr.json
{
  "common": {
    "save": "Enregistrer",
    "cancel": "Annuler"
  }
}
```

2. Update the locales array:

```typescript
// src/types/dictionary.ts
export const locales = ["de", "en", "fr"] as const;
```

3. Import the new file for type inference (optional but recommended):

```typescript
// src/types/dictionary.ts
import type de from "../../messages/de.json";
import type en from "../../messages/en.json";
import type fr from "../../messages/fr.json";

export const locales = ["de", "en", "fr"] as const;
export type AppDictionary = typeof de;
```
